<?php // Before trying to crack the plugin, please consider buying a pro license at https://www.mapsmarker.com/order - we have put hundreds of hours into the development of our plugin and without honest customers we will not be able to continue the development and support. Thanks for your understanding and your honesty!
namespace MMP; class Shortcodes { private $O17; private $shortcodes; public function __construct() { $spbas=maps_marker_pro::get_instance("\115\115\120\134SPBAS"); $this->O17 =($spbas->Ou() || $spbas->Oy(FALSE,TRUE)); $this->shortcodes =array(); } public function init() { add_action("\151nit",array($this,"\154\157\141d_shor\164\143\157des")); add_action("\167\160_footer",array($this,"add\137\163\150ortcod\145\163"),025); } public function load_shortcodes() { if (!$this->O17) { add_shortcode(maps_marker_pro::$settings["s\150\157\162tcode"],array($this,"shortcod\145\137\145rror")); return; } add_shortcode(maps_marker_pro::$settings["shortcode"],array($this,"\155ap_shor\164\143\157de")); } public function shortcode_error($atts) { $O13=maps_marker_pro::get_instance("\115\115P\134L10\156"); return "<div c\154\141\163s=\042m\155\160\055invali\144\055\154icense\042\076".sprintf($O13->kses__("Map\040\143reated w\151\164\150 <a hr\145\146\075\042%1\044\163\042 titl\145\075\042%2\044\163\042>Maps \115a\162\153\145r Pro\074\057a> co\165\154\144 not \142\145\040disp\154\141\171ed b\145\143\141use\040\157\146 an \151\156\166alid \154\151\143ense\056 Pl\145\141\163e c\157\156\164act t\150\145\040site\040\157\167ner \146\157\162 mor\145\040\144etai\154\163\056","m\155\160"),"http\163\072\057/www.m\141\160\163marker.\143\157\155/expir\145\144\057",esc_attr__("#1 \155\141\160ping plu\147\151\156 for Wo\162\144\120ress","\155mp"))."<\057\144\151v>"; } public function map_shortcode($atts) { $db=maps_marker_pro::get_instance("\115\115P\134DB"); $mmp_settings=maps_marker_pro::get_instance("\115\115\120\134Set\164\151\156gs"); $l18=maps_marker_pro::get_instance("\115MP\134A\120\111"); if ( isset ($atts["\154\141yer"])) { $atts["\155ap"]=$atts["layer"]; } if ( isset ($atts["m\141\160"])) { $O18=$db->get_map($atts["map"]); if (!$O18) { return $this->error(sprintf(esc_html__("Err\157\162: map co\165\154\144 not b\145\040\154oaded\040\055 a map \167\151\164h ID %\061\044s does \156\157\164 exis\164\056 Please\040\143ontac\164\040\164he si\164\145\040owne\162\056","\155\155\160"),$atts["\155\141\160"])); } $type="ma\160"; $id=$atts["\155\141p"]; if (is_feed() || (function_exists("is_a\155\160\137endpoin\164") && is_amp_endpoint())) { ob_start(); ?><?php echo "\015\012\011\011\011\011\074\160>\015\012\011\011\011\011\011"; ?><?= $O18->l19; ?><?php echo "\074br /\076\015\012\011\011\011\011\011<a hr\145\146\075\042"; ?><?= $l18->link( "\057fulls\143\162\145en/{$id}/"); ?><?php echo "\042 \164\151\164le=\042"; ?><?= esc_html__("\105\155bedded \155\141\160 - show\040\151\156 fulls\143\162\145en mod\145","mm\160"); ?><?php echo "\042\076\015\012\011\011\011\011\011\011\074\151mg src=\042"; ?><?= plugins_url("\151mages\057\155\141p-rss-f\145\145\144.png",__DIR__); ?><?php echo "\042\040\167\151dth=\042\063\0604\042 he\151\147\150t=\04219\067\042 /><br \057\076\015\012\011\011\011\011\011\011"; ?><?= esc_html__("Embedde\144\040\155ap - s\150\157\167 in ful\154\163\143reen m\157\144\145","mmp"); ?><?php echo "\015\012\011\011\011\011\011\074\057a>\015\012\011\011\011\011\074\057\160>\015\012\011\011\011\011"; ?><?php return ob_get_clean(); } } else if ( isset ($atts["\155\141\162ker"])) { if (!$db->get_marker($atts["\155\141\162ker"])) { return $this->error(sprintf(esc_html__("\105rror: map\040\143\157uld no\164\040\142e loade\144\040\055 a m\141\162\153er wit\150\040\111D %1\044\163\040does \156\157\164 exis\164\056 Pleas\145\040\143ontac\164\040the si\164\145\040owner\056","\155\155\160"),$atts["\155\141\162ker"])); } $type="marker"; $id=$atts["\155\141\162ker"]; } else if ( isset ($atts["\143ustom"])) { $O18=$db->get_map($atts["\143\165stom"]); if (!$O18) { return $this->error(esc_html__("E\162\162\157r: map \143\157\165ld not \142\145\040loaded\040\055 invalid\040\163\150ortco\144\145\056 Pleas\145\040\143onta\143\164\040the \163\151\164e owne\162\056","mmp")); } $type="\143ustom"; $id=$atts["\143\165stom"]; } else { return $this->error(esc_html__("\105\162\162or: ma\160\040\143ould \156\157\164 be loa\144\145\144 - inv\141\154\151d sho\162\164\143ode. P\154\145\141se con\164\141\143t th\145\040\163ite o\167\156\145r.","mmp")); } $uid=( isset ($atts["\165id"])) ? esc_js($atts["u\151\144"]): substr(md5(rand()),0,8); $O19=( isset ($atts["\155\141\162kers"])) ? "\133".$db->sanitize_ids($atts["\155\141\162kers"],TRUE)."\135": "\133\135"; $callback=( isset ($atts["cal\154\142\141ck"])) ? esc_js($atts["callback"]): "\156\165\154l"; if ( isset ($atts["highli\147\150\164marker"])) { $atts["hig\150\154\151ght"]=$atts["hi\147\150\154ightma\162\153\145r"]; } $l1a=( isset ($atts["highli\147\150\164"])) ? absint($atts["\150ighlight"]): "\156\165ll"; $fullscreen=( isset ($atts["\146ullscre\145\156"])) ? "\164\162\165e": "\146\141lse"; $O1a=array(); foreach (array_keys($mmp_settings->map_settings_sanity()) as $setting) { $O1a[strtolower($setting)]=$setting; } $settings=array(); foreach ($atts as $lj => $l1b) { if ( isset ($O1a[$lj])) { $settings[$O1a[$lj]]=$l1b; } } $settings=array_map( function ($value) { return ($value === "fa\154\163\145") ? FALSE: $value; } ,$settings); wp_enqueue_style("m\141\160\163marker\160\162\157"); if (is_rtl()) { wp_enqueue_style("\155apsmarke\162\160\162o-rtl"); } if (maps_marker_pro::$settings["\147\157ogleApiK\145\171"]) { wp_enqueue_script("\155\155p-google\155\141\160s"); } wp_enqueue_script("m\141\160\163markerpr\157"); $this->shortcodes[]=array("uid" => $uid,"\164ype" => $type,"\151\144" => $id,"marker\163" => $O19,"\157\166\145rrides" => json_encode($settings,JSON_FORCE_OBJECT),"\143\141\154lback" => $callback,"\150ighlight" => $l1a,"\146\165\154lscreen" => $fullscreen); return "\074\144\151v id=\042\155\141ps-mark\145\162\055pro-".$uid."\042 class=\042\155\141ps-mark\145\162\055pro\042\076\074\057div>"; } public function error($message) { return "\074div cl\141\163\163=\042mmp\055\155\141p-erro\162\042\076".$message."\074/div>"; } public function add_shortcodes() {; ?><?php echo "\015\012\011\011<scrip\164\076\015\012\011\011\011\144ocumen\164\056\141ddEven\164\114\151stene\162\050\047DOMC\157\156\164entLo\141\144\145d', f\165\156\143tion\050\051 \173\015\012\011\011\011\011"; ?><?php foreach ($this->shortcodes as $shortcode):; ?><?php echo "\015\012\011\011\011\011\011new\040\115\141psMark\145\162\120ro(\173\015\012\011\011\011\011\011\011uid:\040\047"; ?><?= $shortcode["\165\151d"]; ?><?php echo "',\015\012\011\011\011\011\011\011\164\171pe: '"; ?><?= $shortcode["t\171\160\145"]; ?><?php echo "',\015\012\011\011\011\011\011\011\151\144: '"; ?><?= $shortcode["id"]; ?><?php echo "',\015\012\011\011\011\011\011\011\155\141rkers:\040"; ?><?= $shortcode["\155arkers"]; ?><?php echo ",\015\012\011\011\011\011\011\011overr\151\144\145s: "; ?><?= $shortcode["\157\166\145rrides"]; ?><?php echo "\054\015\012\011\011\011\011\011\011c\141\154\154back: "; ?><?= $shortcode["callback"]; ?><?php echo ",\015\012\011\011\011\011\011\011\150ighligh\164\072\040"; ?><?= $shortcode["high\154\151\147ht"]; ?><?php echo ",\015\012\011\011\011\011\011\011\146ullscr\145\145\156: "; ?><?= $shortcode["\146\165llscree\156"]; ?><?php echo "\015\012\011\011\011\011\011});\015\012\011\011\011\011"; ?><?php endforeach; ?><?php echo "\015\012\011\011\011\175\051;\015\012\011\011</scri\160\164\076\015\012\011\011"; ?><?php } }