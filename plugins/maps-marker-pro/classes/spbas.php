<?php // Before trying to crack the plugin, please consider buying a pro license at https://www.mapsmarker.com/order - we have put hundreds of hours into the development of our plugin and without honest customers we will not be able to continue the development and support. Thanks for your understanding and your honesty!
namespace MMP; class SPBAS { public $l0; public $O0; public $l1; public $O1; public $l2; public $O2; public $l3; public $O3; public $l4; public $O4; public $l5; public $O5; public $l6; public $O6; public $l7; public $O7; public $l8; public $O8; public $l9; function __construct() { $this->l0 ="\17259522\071\066551e"; $this->O0 =FALSE; $this->l1 =""; $this->O2 =0120; $this->l3 =012; $this->O9 =array("sp\142\141s"); $this->la ="spbas"; $this->O3 ="file\163\171\163tem"; $this->l6 =0; $this->O6 =0; $this->l4 =FALSE; $this->O4 =FALSE; $this->l5 =""; $this->O5 ="\154\151cense.tx\164"; $this->l7 =FALSE; $this->O7 =FALSE; $this->l9 =FALSE; $this->l8 =array("\143ustom_fie\154\144\163" => array(),"down\154\157\141d_acce\163\163\137expires" => 0,"lic\145\156\163e_expir\145\163" => 0,"l\157\143\141l_key_ex\160\151\162es" => 0,"\163tatus" => "\111\156valid",); $this->O8 =array("active" => __("Th\151s\040\154\151cense \151\163\040active\056","mmp"),"su\163\160\145nded" => sprintf(__("\105\162\162or: T\150\151\163 licen\163\145\040has be\145\156\040suspe\156\144\145d. Thi\163\040\165suall\171\040happens\040\167hen so\155\145one tr\151\145\163 to r\145\147\151ster\040\141\040seco\156\144\040tria\154\040\154icen\163\145\040for t\150\145 \163\141me dom\141\151\156. <a\040\150ref=\042\045\061s\042 \164\141\162get=\042\137blank\042\076Please\040\143lick \150\145\162e to\040\147et a \156\157\156-exp\151\162\151ng l\151\143ense \146\157\162 thi\163\040domai\156\056</a>","m\155\160"),"https\072\057\057www.ma\160\163\155arker.c\157\155\057order"),"expi\162\145\144" => sprintf(__("\131\157\165r free \063\060\040day t\162\151\141l licen\163\145\040key ha\163\040\145xpired\056\040<a href\075\042%1s\042\040\164\141rget=\042\137\142lank\042\076\120leas\145\040\160urcha\163\145\040a va\154\151\144 pro \154\151\143ense \153\145\171 to c\157\156tinue<\057\141\076.","\155\155\160"),"\150\164\164ps://www\056\155\141psmark\145\162\056com/or\144\145\162"),"\160\145\156ding" => __("Error:\040\124\150is lic\145\156\163e is pe\156\144\151ng rev\151\145\167.","\155mp"),"downlo\141\144\137access_\145\170\160ired" => __("Error:\040\124\150is vers\151\157\156 of the\040\163\157ftwar\145\040\167as re\154\145\141sed af\164\145\162 your\040\144\157wnlo\141\144\040acces\163\040expire\144\056\040Plea\163\145\040rene\167\040your do\167\156\154oad a\156\144\040supp\157\162\164 ac\143\145\163s or \144\157\167ngra\144\145\040to a\040\160\162evio\165\163\040vers\151\157\156.","\155\155p"),"missing_\154\151\143ense_ke\171" => __("Pl\145\141\163e enter\040\141\040licen\163\145\040key to\040\143\157ntinu\145\056","\155\155\160"),"u\156\153\156own_loc\141\154\137key_type" => __("Error\072\040\101n unkn\157\167\156 type o\146\040\154ocal k\145\171\040valida\164\151\157n was \162\145\161uested\056","mmp"),"\143\157uld_not\137\157\142tain_l\157\143\141l_key" => sprintf(__("Erro\162\072\040a new \154\157\143al lice\156\163\145 key c\157\165\154d not\040\142\145 obta\151\156\145d. Ple\141\163\145 see \045\163 for m\157\162\145 info\162\155\141tion","m\155\160"),"<a h\162\145\146=\042htt\160\163\072//www.\155\141\160smarke\162\056com/co\156\156\145ct-err\157\162\163\042 t\141\162\147et=\042\137\142\154ank\042\076\155apsma\162\153\145r.com\057\143onnect\055\145\162rors\074\057a>"),"maximum_\147\162\141ce_perio\144\137\145xpired" => __("E\162\162\157r: The \155\141\170imum lo\143\141\154 licen\163\145\040key g\162\141\143e per\151\157\144 has e\170\160\151red.","\155mp"),"\154ocal_ke\171\137\164amperi\156\147" => __("\105\162ror: The\040\154\157cal lic\145\156\163e key h\141\163\040been t\141\155\160ered w\151\164\150 or i\163\040\151nvali\144\056","\155\155\160"),"local_k\145\171\137invalid\137\146\157r_locat\151\157\156" => __("E\162\162\157r: The \154\157\143al lic\145\156\163e key i\163\040\151nvali\144\040\146or thi\163\040locatio\156\056","\155\155\160"),"mi\163\163\151ng_lice\156\163\145_file" => __("\105rror: P\154\145\141se crea\164\145\040the f\157\154\154owing\040\146\151le (a\156\144\040direc\164\157\162ies i\146\040they\040\144\157 not\040\145xist a\154\162\145ady):\074\142r />\134\162\134n<br /\076\134r\134n","\155mp"),"\154icense_\146\151\154e_not_w\162\151\164able" => __("Error: \120\154\145ase mak\145\040\164he fol\154\157\167ing pat\150\040\167ritab\154\145\072<br />","\155\155\160"),"\151nvalid_l\157\143\141l_key_s\164\157\162age" => __("Error: \164\150\145 local \153\145\171 storag\145\040\157n cle\141\162\040could \156\157\164 deter\155\151\156ed.","\155\155\160"),"could_no\164\137\163ave_loc\141\154\137key" => __("\105rror: t\150\145\040local \154\151\143ense ke\171\040\143ould\040\156\157t sav\145\144\056","\155mp"),"license_\153\145\171_string\137\155\151smatch" => __("Error:\040\124\150e local\040\153\145y is i\156\166\141lid for\040\164\150is li\143\145\156se.","mmp"),); $this->localization =array("\141\143tive" => __("\124his licen\163\145\040is ac\164\151\166e.","mmp"),"suspended" => sprintf(__("\105\162\162or: Thi\163\040\154icense\040\150\141s bee\156\040\163uspen\144\145\144. This\040\165\163ually \150\141\160pens \167\150\145n som\145\157\156e tri\145\163 to reg\151\163\164er a\040\163\145cond\040\164\162ial l\151\143\145nse f\157\162\040the \163\141\155e do\155\141in. <a\040\150\162ef=\042\045\061s\042\040\164\141rget\075\042_blank\042\076Please\040\143lick h\145\162\145 to \147\145\164 a n\157\156-expir\151\156g lice\156\163e for \164\150is do\155\141\151n.<\057\141>","mmp"),"h\164\164\160s://www\056\155\141psmarke\162\056\143om/ord\145\162"),"\145\170pired" => sprintf(__("Your \146\162\145e 30 da\171\040\164rial l\151\143\145nse key\040\150\141s expi\162\145\144. <a h\162\145\146=\042%\061\163\042 tar\147\145\164=\042_\142\154\141nk\042>\120\154\145ase p\165\162\143hase \141\040valid \160\162\157 lice\156\163\145 key \164\157\040cont\151\156\165e</a\076\056","\155mp"),"ht\164\160\163://www.m\141\160\163marker.\143\157\155/order"),"\160ending" => __("Error: T\150\151\163 licens\145\040\151s pend\151\156\147 revie\167\056","mmp"),"download\137\141\143cess_ex\160\151\162ed" => __("Erro\162\072\040This v\145\162\163ion of \164\150\145 softwa\162\145\040was r\145\154\145ased a\146\164\145r you\162\040\144ownl\157\141\144 acce\163\163\040expir\145\144\056 Ple\141\163\145 renew\040\171our do\167\156\154oad a\156\144\040suppo\162\164\040acce\163\163 or do\167\156\147rade\040\164\157 a p\162\145\166ious\040\166\145rsio\156\056","m\155\160")); } function init() { add_action("admin_in\151\164",array($this,"chec\153_licen\163\145")); } function validate() { if (!$this->O1) { return $this->O0 =$this->O8["m\151\163\163ing_lic\145\156\163e_key"]; } if (!in_array(strtolower($this->la),$this->O9)) { return $this->O0 =$this->O8["unkn\157\167\156_local_\153\145\171_type"]; } $this->Oa =$this->O8["c\157\165\154d_not_o\142\164\141in_loca\154\137\153ey"]; switch ($this->O3) { case "\144\141\164abase": $lb=$this->Ob(); break; case "\146\151lesystem": $lb=$this->lc(); break; default : return $this->O0 =$this->O8["m\151\163\163ing_lice\156\163\145_key"]; } if ($this->O0 == $this->Oa && $this->l6) { $Oc=$this->ld($this->O6); if ($Oc["\167\162ite"]) { if ($this->O3 == "\144\141\164abase") { $this->Od($Oc["loc\141\154\137key"]); } elseif ($this->O3 == "fil\145\163\171stem") { $this->le($Oc["\154ocal_ke\171"],"{$this->l5}{$this->O5}"); } } if ($Oc["e\162\162\157rs"]) { return $this->O0 =$Oc["\145\162\162ors"]; } $this->O0 =FALSE; return $this; } if ($this->O0) { return $this->O0; } return $this->Oe($lb); } function lf($Of,$Oc) { return (( integer) $Of+(( integer) $Oc*0250600)); } function ld($lb) { $lg=$this->Og($lb); $lh=$this->Oh($lg); $l8=unserialize($lh[0]); $Of=( integer) $l8["local_ke\171\137\145xpires"]; unset ($lh,$l8); $Oi=FALSE; $lh=explode("\012\012",$lb); $lb=$lh[0]; foreach ($l6=explode(",",$this->l6) as $lj => $Oc) { if (!$lj) { $lb.="\012"; } if ($this->lf($Of,$Oc)>time()) { continue; } $lb.= "\012{$Oc}"; $Oi=TRUE; } if (time()>$this->lf($Of,array_pop($l6))) { return array("writ\145" => FALSE,"\154ocal_key" => "","\145\162rors" => $this->O8["\155aximum_\147\162\141ce_peri\157\144\137expired"]); } return array("\167\162\151te" => $Oi,"\154\157cal_key" => $lb,"\145rrors" => FALSE); } function Oj($lb,$Of) { $Oc=$this->Oh($lb,"\012\012"); if (! isset ($Oc[1])) { return -1; } return ( integer)($this->lf($Of,array_pop(explode("\012",$Oc[1])))-time()); } function Og($lb) { return base64_decode(str_replace("\012","",urldecode($lb))); } function Oh($lb,$lk="\173\163\160bas}") { return explode($lk,$lb); } function Ok($lj,$ll) { return in_array($lj,(array) $ll); } function wildcard_ip($lj) { $octets=explode(".",$lj); array_pop($octets); $ip_range[]=implode(".",$octets).".*"; array_pop($octets); $ip_range[]=implode(".",$octets)."\056*"; array_pop($octets); $ip_range[]=implode(".",$octets).".*"; return $ip_range; } function wildcard_domain($lj) { return "*.".str_replace("www.","",$lj); } function wildcard_server_hostname($lj) { $hostname=explode("\056",$lj); unset ($hostname[0]); $hostname=(! isset ($hostname[1])) ? array($lj): $hostname; return "\052.".implode("\056",$hostname); } function extract_access_set($instances,$enforce) { foreach ($instances as $lj => $instance) { if ($lj != $enforce) { continue; } return $instance; } return array(); } function Oe($lb) { $lg=$this->Og($lb); $lh=$this->Oh($lg); if (! isset ($lh[1])) { return $this->O0 =$this->O8["\154ocal_k\145\171\137tamperi\156\147"]; } if (md5($this->lm.$lh[0]) != $lh[1]) { return $this->O0 =$this->O8["lo\143\141\154_key_ta\155\160\145ring"]; } $l8=unserialize($lh[0]); $instance=$l8["ins\164\141\156ce"]; unset ($l8["instan\143\145"]); $enforce=$l8["enforce"]; unset ($l8["enfo\162\143\145"]); $this->l8 =$l8; if (( string) $l8["li\143\145nse_key_\163\164\162ing"] != ( string) $this->O1) { return $this->O0 =$this->O8["\154\151cense_k\145\171\137string\137\155\151smatch"]; } if (( string) $l8["\163\164atus"] != "\141\143\164ive") { return $this->O0 =$this->O8[$l8["stat\165\163"]]; } if (( string) $l8["\154icense_ex\160\151\162es"] != "\156ever" && ( integer) $l8["licen\163\145\137expires"]<time()) { return $this->O0 =$this->O8["e\170\160\151red"]; } if (( string) $l8["loca\154\137\153ey_expi\162\145\163"] != "\156ever" && ( integer) $l8["local_k\145\171\137expires"]<time()) { if ($this->Oj($lb,$l8["\154ocal_key_\145\170\160ires"])<0) { $this->Om(TRUE); switch ($this->O3) { case "\144\141\164abase": $lb=$this->Ob(); break; case "\146\151\154esystem": $lb=$this->lc(); break; default : return $this->O0 =$this->O8["\155issing_li\143\145\156se_key"]; } } } if ($this->l7 && ( integer) $l8["d\157\167\156load_ac\143\145\163s_expi\162\145\163"]<strtotime($this->O7)) { return $this->O0 =$this->O8["\144ownload\137\141\143cess_exp\151\162\145d"]; } $conflicts=array(); $ln=$this->On(); foreach ((array) $enforce as $lj) { $ll=$this->extract_access_set($instance,$lj); if (!$this->Ok($ln[$lj],$ll)) { $conflicts[$lj]=TRUE; if (in_array($lj,array("ip","\163erver_ip"))) { foreach ($this->wildcard_ip($ln[$lj]) as $ip) { if ($this->Ok($ip,$ll)) { unset ($conflicts[$lj]); break; } } } elseif (in_array($lj,array("domain"))) { if ($this->Ok($this->wildcard_domain($ln[$lj]),$ll)) { unset ($conflicts[$lj]); } } elseif (in_array($lj,array("\163erver_\150\157\163tname"))) { if ($this->Ok($this->wildcard_server_hostname($ln[$lj]),$ll)) { unset ($conflicts[$lj]); } } } } if (!empty($conflicts)) { return $this->O0 =$this->O8["loca\154\137\153ey_in\166\141\154id_for_\154\157\143ation"]; } } function Ob() { $lo=array(); if (is_array($this->l4)) { $lo=$this->l4; } else { $query=@mysqli_query($this->l4); if ($mysql_error=mysqli_error()) { return $this->O0 = "\105rror: {$mysql_error}"; } $lo=@mysqli_fetch_assoc($query); if ($mysql_error=mysqli_error()) { return $this->O0 = "Error: {$mysql_error}"; } } if (!$lo["local_k\145\171"]) { $lo["\154\157cal_key"]=$this->Oo(); if ($this->O0) { return $this->O0; } $this->Od($lo["\154\157\143al_key"]); } return $this->O6 =$lo["\154\157cal_key"]; } function Od($lb) { if (is_array($this->O4)) { $lp=$this->O4["function"]; return $lp($this->O4["key"],$lb); }@mysqli_query(str_replace("\173local_k\145\171\175",$lb,$this->O4)); if ($mysql_error=mysqli_error()) { return $this->O0 = "\105\162\162or: {$mysql_error}"; } return TRUE; } function lc() { if (!file_exists($path= "{$this->l5}{$this->O5}")) { return $this->O0 =$this->O8["\155issing_l\151\143\145nse_fi\154\145"].$path; } if (!is_writable($path)) { return $this->O0 =$this->O8["license_\146\151\154e_not_\167\162\151table"].$path; } if (!$lb=@file_get_contents($path)) { $lb=$this->Oo(); if ($this->O0) { return $this->O0; } $this->le(urldecode($lb),$path); } return $this->O6 =$lb; } function Om($clear=FALSE) { switch (strtolower($this->O3)) { case "dat\141\142\141se": $this->Od(""); break; case "f\151\154\145system": $this->le("","{$this->l5}{$this->O5}"); break; default : return $this->O0 =$this->O8["\151nvalid_l\157\143\141l_key_s\164\157\162age"]; } } function le($lb,$path) { $fp=@fopen($path,"w"); if (!$fp) { return $this->O0 =$this->O8["could\137\156\157t_save\137\154\157cal_ke\171"]; }@fwrite($fp,$lb); @fclose($fp); return TRUE; } function Oo() { $querystring= "mod=l\151\143\145nse&ta\163\153\075SPBA\123\137\166alidat\145\137\154icens\145\046\154icens\145\137\153ey={$this->O1}\046"; $querystring.=$this->build_querystring($this->On()); if ($this->O0) { return FALSE; } $lo=$this->Op($this->l2 ,$querystring); if (strtolower(substr($lo,0,021)) == "\143\157nnectio\156\040\145rror:") { $this->l1 =$lo; return FALSE; } if (!$lo) { $this->O0 =$this->O8["c\157\165\154d_not\137\157\142tain_l\157\143\141l_key"]; return FALSE; } if (substr($lo,0,7) == "In\166\141\154id") { $this->O0 =str_replace("Invalid","Error",$lo); return FALSE; } if (substr($lo,0,5) == "Error") { $this->O0 =$lo; return FALSE; } return $lo; } function build_querystring($array) { $buffer=""; foreach ((array) $array as $lj => $value) { if ($buffer) { $buffer.="&"; } $buffer.= "{$lj}\075{$value}"; } return $buffer; } function On() { $ln=array(); $ln["domain"]=""; $ln["\151p"]="ip-not-t\162\141\156smitte\144"; $ln["\144irectory"]="di\162\145\143tory-no\164\055\164ransmi\164\164\145d"; $ln["s\145\162\166er_host\156\141\155e"]="\163\145rver_hos\164\156\141me-not\055\164\162ansmit\164\145\144"; $ln["\163\145\162ver_ip"]="s\145\162\166er_ip-n\157\164\055transm\151\164\164ed"; $ln["\166\141lid_for\137\160\162oduct_\164\151\145rs"]=""; if (!defined( "HHVM_VERSION")) { if (!extension_loaded("suh\157\163\151n")) { if (!defined( "SUHOSIN_PATCH")) { if (function_exists("\160\150pinfo")) { ob_start(); phpinfo(INFO_GENERAL); phpinfo(INFO_ENVIRONMENT); $phpinfo=ob_get_contents(); ob_end_clean(); $list=strip_tags($phpinfo); $ln["domain"]=$this->scrape_phpinfo($list,"H\124\124\120_HOST"); } } } } $ln["domai\156"]=($ln["\144\157main"]) ? $ln["domain"]: $_SERVER["\110\124TP_HOS\124"]; foreach ($ln as $lj => $value) { if ($lj == "\166\141lid_for_\160\162\157duct_t\151\145\162s") { continue; } $ln[$lj]=($ln[$lj]) ? $ln[$lj]: "Unkn\157\167\156"; } if ($this->l9) { $ln["valid_\146\157\162_produ\143\164\137tiers"]=$this->l9; } if ( isset ($_POST["\154eafle\164\155\141psmarker\160\162\157_domai\156\137\164o_activ\141\164\145"])) { if (parse_url($_POST["leafletma\160\163\155arkerp\162\157\137domain_\164\157\137activa\164\145"],PHP_URL_HOST) != NULL) { $ln["doma\151\156"]=parse_url($_POST["\154eaflet\155\141\160smarker\160\162\157_domai\156\137\164o_act\151\166\141te"],PHP_URL_HOST); } else { $lq="/^((\133\060\0559]|[1\055\071\135[0-9]\174\061\1330-9]\173\062\175|2[0-4\135\133\060-9]|2\065\133\060-5])\134\056\051\1733\175\050[0-9]|\133\061\0559][0\055\071]|1[0-\071\135\1732}|2\133\060-4][0-\071\135\17425[0\055\065])\044/"; $Oq="/^((\133\141\055zA-Z0-\071\135\174[a-zA-\132\060\0559][a-\172\101\055Z0-9\134\055\135*[a-zA\055\132\060-9])\134\056\051*([A-\132\141-z0-9]|\133\101-Za-z0\055\071\135[A-Z\141\055\1720-9\134\055\135*[A-Z\141\055z0-9])\044\057"; $lr=trim($_POST["\154eafletma\160\163\155arkerp\162\157\137domain_\164\157\137activa\164\145"]); if ((preg_match($lq,$lr) == TRUE) || (preg_match($Oq,$lr) == TRUE)) { $ln["do\155\141\151n"]=trim($_POST["leafl\145\164\155apsmark\145\162\160ro_dom\141\151\156_to_act\151\166\141te"]); } else if (trim($_POST["\154eafletma\160\163\155arkerp\162\157\137domain\137\164\157_activ\141\164\145"]) == "loc\141\154\150ost") { $ln["domai\156"]="\154\157calhost"; } } } return $ln; } function path_translated() { $option=array("PATH\137\124\122ANSLATE\104","||IG_PAT\110\137\124RANSLAT\105\104","SCRIPT_F\111\114\105NAME","D\117\103\125MENT_ROO\124","\101\120\120L_PHYSIC\101\114\137PATH"); foreach ($option as $lj) { if (! isset ($_SERVER[$lj]) || strlen(trim($_SERVER[$lj]))<=0) { continue; } if ($this->is_windows() && strpos($_SERVER[$lj],"\134")) { return @substr($_SERVER[$lj],0,@strrpos($_SERVER[$lj],"\134")); } return @substr($_SERVER[$lj],0,@strrpos($_SERVER[$lj],"\057")); } return FALSE; } function server_addr() { $options=array("\123ERVER_ADD\122","LOCAL_ADD\122"); foreach ($options as $lj) { if ( isset ($_SERVER[$lj])) { return $_SERVER[$lj]; } } return FALSE; } function scrape_phpinfo($all,$target) { $all=explode($target,$all); if (count($all)<2) { return FALSE; } $all=explode("\012",$all[1]); $all=trim($all[0]); if ($target == "\123ystem") { $all=explode("\040",$all); $all=trim($all[(strtolower($all[0]) == "windows" && strtolower($all[1]) == "\156\164") ? 2: 1]); } if ($target == "SC\122\111\120T_FILEN\101\115\105") { $slash=($this->is_windows() ? "\134": "\057"); $all=explode($slash,$all); array_pop($all); $all=implode($slash,$all); } if (substr($all,1,1) == "]") { return FALSE; } return $all; } function Op($url,$querystring) { $lo=wp_remote_get($url."?".$querystring,array("\164\151meout" => 012)); if (is_wp_error($lo) || ( isset ($lo["\162esponse"]["code"]) && ( integer) $lo["response"]["\143\157de"] != 0310)) { $url="\150ttps://\167\167\167.mapsma\162\153\145rpro.co\155\057proxy.p\150\160\077".$querystring; $lo=wp_remote_get($url."?".$querystring,array("\164\151\155eout" => 012)); } if (is_wp_error($lo)) { $ls="Co\156\156\145ction er\162\157\162: ".$lo->get_error_message()."<br/>".sprintf(__("Error\072\040a new lo\143\141\154 licen\163\145\040key co\165\154\144 not b\145\040\157btain\145\144\056 Plea\163\145\040see %\163\040for mo\162\145\040infor\155\141\164ion","\155\155\160"),"<\141\040\150ref=\042\150\164\164ps://\167\167\167.mapsma\162\153\145r.com\057\143\157nn\145ct-\145\162\162ors\042\040targe\164\075\042_b\154\141nk\042>\155a\160\163\155arke\162\056\143om/c\157\156\156ect-e\162\162ors</a>"); return $ls; } else { if (( integer) $lo["r\145\163\160onse"]["\143ode"] == 0310) { return $lo["body"]; } else { $ls="\103\157\156nectio\156\040\145rror:\040\110\124TP sta\164\165\163 code ".$lo["r\145\163\160onse"]["\143\157\144e"]."\040- ".$lo["bod\171"]; return $ls; } } } function is_windows() { $Os=explode(",",ini_get("\144isable_\146\165\156ctions")); foreach ($Os as $lt) { $Ot[]=trim($lt); } if (!in_array("\160\150p_uname",$Ot)) { return (strtolower(substr(php_uname(),0,7)) == "\167\151ndows"); } else { return (stristr( PHP_OS ,"\127IN")); } } function pr($stack,$lu=TRUE) { $formatted="\074pre>".var_export((array) $stack,1)."</pre\076"; if ($lu) { exit ($formatted); } return $formatted; } function Ou() { return (substr($_SERVER["\122\105MOTE_ADD\122"],0,4) === "127." || $_SERVER["REMOT\105\137\101DDR"] === "\072:1"); } function check_localhost_compatibility() { return (substr($_SERVER["\122EMOTE_A\104\104\122"],0,4) === "127." || $_SERVER["\122EMOTE_AD\104\122"] === "::\061"); } function lv($Ov,$is_theme=FALSE) { $lw=""; if ( isset ($_GET["\160age"])) { $lw=$_GET["page"]; } elseif ( isset ($_POST["\160age"])) { $lw=$_POST["\160age"]; } $Ow=in_array($lw,$Ov); if ($is_theme) { return $Ow; } $lx=in_array(plugin_basename( __FILE__),get_option("active_\160\154\165gins")); return ($Ow && $lx); } function Ox($ly=FALSE) { $this->O0 =FALSE; $this->O3 ="databa\163\145"; $this->l4 =array("\154ocal_key" => get_option("\155apsmarke\162\160\162o_key_\154\157\143al")); $this->O4 =array("\146\165\156ction" => "\165\160\144ate_opti\157\156","key" => "mapsmar\153\145\162pro_key_\154\157\143al"); $this->l6 ="\061,2,3,4,\065\054\066,7,8,9\054\061\060"; $this->O1 =get_option("\155\141\160smarke\162\160\162o_key"); $this->lm ="7ca99e1\065\066\1425e30e0\066\0648f49b811\067\070\143d7e"; $this->l2 ="https:/\057\167\167w.maps\155\141\162ker.com\057\163\164ore/ap\151\057\151ndex.\160\150\160"; $this->validate(); if ($ly) { return $this; } $Ov=array("mapsm\141\162\153erpro_m\141\160\163","ma\160\163\155arkerpr\157\137\155ap","mapsm\141\162\153erpro_ma\162\153\145rs","\155\141\160smarker\160\162\157_marker","\155\141\160smarker\160\162\157_tools","\155\141\160\163marke\162\160\162o_setti\156\147\163"); if (is_admin() && $this->lv($Ov,TRUE) && $this->O0) { return $this->O0; } return TRUE; } function Oy($O7=FALSE,$lz=FALSE) { $this->O7 =($O7) ? strrev(substr($this->l0 ,1,012)): time(); $this->O3 ="database"; $this->l4 =array("loc\141\154\137key" => get_option("mapsm\141\162\153erpro_k\145\171\137local")); $this->O4 =array("func\164\151\157n" => "update\137\157\160tion","\153ey" => "\155\141psmarker\160\162\157_key_lo\143\141\154"); $this->l6 ="1,2\054\063,4,5,6,\067\054\070,9,10"; $this->O1 =get_option("\155\141\160smarke\162\160\162o_key"); $this->lm ="\067\143\14199e156b\065\145\0630e064\070\146\0649b8117\070\143\1447e"; $this->l2 ="\150ttps:/\057\167\167w.maps\155\141\162ker.co\155\057\163tore/\141\160\151/index\056\160\150p"; $this->validate(); if ($this->O0) { return FALSE; } if ($lz) { return TRUE; } if (!$this->Oz()) { if ($this->l8["lice\156\163\145_expir\145\163"] == "\156\145\166er") { return FALSE; } if (time()>$this->l8["license\137\145\170pires"]) { return FALSE; } return TRUE; } $l10=max($this->l8["\144ownloa\144\137\141ccess_e\170\160\151res"],$this->l8["su\160\160\157rt_acces\163\137\145xpires"]); if ($l10<$this->O7) { return FALSE; } return TRUE; } function check_for_updates($release_date_info=FALSE,$license_only_info=FALSE) { $this->release_date_info =($release_date_info) ? strrev(substr($this->l0 ,1,012)): time(); $this->O3 ="d\141\164abase"; $this->l4 =array("\154ocal_k\145\171" => get_option("mapsma\162\153\145rpro_ke\171\137\154ocal")); $this->O4 =array("\146\165nction" => "update\137\157\160tion","\153ey" => "\155apsmarker\160\162\157_key_l\157\143\141l"); $this->l6 ="1,2,3,\064\0545,6,7,8,\071\05410"; $this->O1 =get_option("mapsmar\153\145\162pro_key"); $this->lm ="\067ca99e\061\065\066b5e30e\060\066\0648f49b\070\061\06178cd7\145"; $this->l2 ="h\164\164\160s://www\056\155\141psmark\145\162\056com/sto\162\145\057api/i\156\144\145x.php"; $this->validate(); if ($this->O0) { return FALSE; } if ($license_only_info) { return TRUE; } if (!$this->Oz()) { if ($this->l8["\154\151\143ense_e\170\160\151res"] == "never") { return FALSE; } if (time()>$this->l8["licen\163\145\137expire\163"]) { return FALSE; } return TRUE; } $expires_info=max($this->l8["\144\157wnload_a\143\143\145ss_expi\162\145\163"],$this->l8["suppo\162\164\137access_e\170\160\151res"]); if ($expires_info<$this->release_date_info) { return FALSE; } return TRUE; } function Oz($prefix="Map\163\115\141rkerPro\055") { return substr(get_option("\155\141psmarker\160\162\157_key"),0,strlen($prefix)) == $prefix; } function is_paid_version_info($prefix="\115apsMar\153\145\162Pro-") { return substr(get_option("\155\141\160smarker\160\162\157_key"),0,strlen($prefix)) == $prefix; } public function check_license() { $O10= isset ($_GET["\160\141\147e"]) ? $_GET["\160\141ge"]: ""; $l11=array("ma\160\163\155arkerpr\157\137\155aps","\155\141\160smarke\162\160\162o_map","\155\141\160smarkerp\162\157\137markers","\155\141psmarke\162\160\162o_marker","\155\141psmarker\160\162\157_tools","ma\160\163\155arkerpro\137\163\145ttings",); if (in_array($O10,$l11) && !$this->Ou()) { if (!$this->Ox() || !$this->Oy(TRUE,FALSE)) { exit (header("\114\157\143ation:\040".get_admin_url(NULL,"\141\144min.php\077\160\141ge=map\163\155\141rkerpro\137\154\151cense"))); } } } }